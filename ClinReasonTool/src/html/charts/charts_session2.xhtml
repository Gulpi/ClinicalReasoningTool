<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:v="urn:schemas-microsoft-com:vml">
 <f:view locale="#{crtContext.locale}">     
 <head>
<f:event type="preRenderView" listener="#{facesContext.externalContext.response.setHeader('Cache-Control', 'no-cache, no-store')}" />

<title>Illness Script Portfolio</title>
 <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<script src="../../scripts/jquery112/jquery.js" type="text/javascript"></script>
<script src="../../scripts/jquery112/jquery-ui.min.js" type="text/javascript"></script>
<script src="../../scripts/portfolio.js" type="text/javascript"></script>
<script src="../../scripts/d3/d3.js" type="text/javascript"></script>
<script src="../../scripts/nvd3/nv.d3.js" type="text/javascript"></script>
<script src="../../scripts/d3utils.js" type="text/javascript"></script>
<script src="../../scripts/ajax.js"></script>

<link rel="stylesheet" type="text/css" href="../../scripts/jquery112/ui-lightness/jquery-ui.css" /> 
<link rel="stylesheet" href="../../styles/portfolio.css" />
<link rel="stylesheet" href="../../styles/clinreason_boxes.css" />
<link rel="stylesheet" href="../../styles/font-awesome/css/font-awesome.css" />
<link rel="stylesheet" href="../../scripts/nvd3/nvd3.css" />

<script language="JavaScript">
var test = "#{crtContext.initSession}";
var currentChartNum = 1; //default is overall performance
var chartLabelMe = "#{prop['charts.me']}";
var chartLabelPeer = "#{prop['charts.peer']}";
var peerStatus = 1;
var sumstDialogTitle = "#{prop['sumst.details']}";
//var sumstSQ = "#{prop['sumst.chart.my']} <br/> #{crtContext.patillscript.summSt.textSQ}";
//var sumstExpSQ = "#{prop['sumst.chart.exp']} <br/>  #{crtContext.expertPatIllScript.summSt.textSQ}";
//var sumstLegend = "#{prop['sumst.sq']}";

$(function() {
	resetSessionStorage();
	$("#jdialog").dialog({ //dialog to display sumary statement details:
		autoOpen: false,
		modal: true,
		width: "auto",
		height: "auto",
		position: { my: "left+20 top+20", at: "left-0 top+0", of: window },
		//we have to detect when the user simply closes the jdialog and check whether we have to reset some stuff
		/*beforeClose: function( event ) {
		    if ( event.originalEvent ) {
		    	return closeSubmitDialog();
		    }
		}*/
	});
	
	$( this ).tooltip({
      	items: "[mytooltip]",
      	position: { my: "left+5 center", at: "right center" },
      	content: function() {
        	var element = $( this );
        	var parent = $( this ).parent();
			//only show tooltip if item is currently not dragged
       		if (!$(parent).is('.ui-draggable-dragging')) {
       		    return $( this ).attr( "mytooltip" );
       		}

		}
    });
	//printLargeOverall();
});

var chartTypeDisplay = "#{chartConf.typeOfChart}";

</script>
 </head>
 <body class="chartbody">
 
<div id="chart-summary" class="chartsummary">
		#{prop['chart.all.overall']}: <!-- <i class="fa overallscore_#{crtContext.learningAnalyticsContainer.overallScore.scoreRange}" mytooltip="#{crtContext.learningAnalyticsContainer.overallScore.scoreBasedOnExp}"></i><br/>-->
		
		<div class="perfstatus" mytooltip="#{crtContext.learningAnalyticsContainer.overallScore.scoreBasedOnExpPerc}% (#{crtContext.learningAnalyticsContainer.overallPeerScore.expPeerPercentagePerc}%)">
			<div class="success" style="width:#{crtContext.learningAnalyticsContainer.overallScore.scoreBasedOnExpPerc}%"></div>
		</div><br/>		
		#{prop['chart.all.summst']}: <i class="fa score_#{crtContext.learningAnalyticsContainer.sumScore.scoreRange}"></i>
		<a href="javascript:openSumStDetails();" mytooltip="#{prop['sumst.details.hint']}"><i class="fa fa-info-circle"></i></a>
		<br/><br/>	

</div>
<!--  TIP: -->
 <div class="charts_tip tip_#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.learningBean.tip}"><i class="fa fa-lightbulb-o"></i> 
	#{prop['charts.tips']}:<br/>
	#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.learningBean.printTip}
</div><br clear="all"/><br/>

scores:<br/>
problems score : #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.overallProblemScoreCat} (#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.problemScore})<br/>
ddx score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.overallDDXScoreCat} (#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.DDXScore})<br/>
test score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.overallTestScoreCat} (#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.testScore})<br/>
therapy score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.overallMngScoreCat} (#{crtContext.learningAnalyticsContainer.learningAnalyticsBean.mngScore})<br/>

peer scores: <br/>
problem peer score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.problemlistPeerScore.peerPercentage}<br/>
ddx peer score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.DDXlistPeerScore.peerPercentage}<br/>
test peer score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.testlistPeerScore.peerPercentage}<br/>
mng peer score: #{crtContext.learningAnalyticsContainer.learningAnalyticsBean.mnglistPeerScore.peerPercentage}<br/>

<div class="boxes_container">
	<div id="canvas" class="canvas jtk-surface drag-drop jtk-surface-nopan" >

		  <!-- problems -->
		  <div id="fdg_box"  class="container fdg_cont" group="fdg_group">
		   		<div id="fdg_title" class="title"  mytooltip="#{prop['findings.search']}">#{prop['findings']} <i class="fa fa-info-circle"></i></div>	

		  </div>
		  <!--  diagnoses -->
		  <div id="ddx_box" class="container ddx_cont" group="ddx_group">	
		  		<div id="ddx_title"  mytooltip="#{prop['ddx.search']}" class="title">#{prop['ddx']} <i class="fa fa-info-circle"></i></div>	

		  </div>
		  <!-- tests -->
		  <div id="tst_box" class="container tst_cont" group="tst_group">
		  		<div id="tst_title" mytooltip="#{prop['tests.search']}" class="title">#{prop['tests']} <i class="fa fa-info-circle"></i></div>		  		

		</div>
		  <!-- managements -->
		  <div id="mng_box" class="container mng_cont" group="mng_group">
		  	<div id="mng_title"  mytooltip="#{prop['mng.search']}" class="title">#{prop['mng']} <i class="fa fa-info-circle"></i></div>
				
	  		</div>
		 <div id="sum_box" class="container sum_container" group="sum_group">	
		 	<div id="sum_title" mytooltip="#{prop['sumst.hint']}" class="title">#{prop['summst']} <i class="fa fa-info-circle"></i>

		 	</div>
		 	 <div class="node-collapse"></div>
		 	 #{crtContext.patillscript.summSt.textSQ}<br/>
		 	 #{crtContext.expertPatIllScript.summSt.textSQ}<br/>
		 	 #{prop['sumst.sq']}
	</div>
	</div>
</div>

<div id="jdialog"></div>

 </body>
 </f:view>
 </html>