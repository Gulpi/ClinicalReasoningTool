
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head><title>Patient Illness Script</title>
 <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css" href="../scripts/jquery112/ui-lightness/jquery-ui.css" /> 
<link rel="stylesheet" type="text/css" href="../scripts/draw2d/css/contextmenu.css"  />
<!--  <link rel="stylesheet" type="text/css" href="<PMW fcache>files/html/scripts/draw2d/css/contextmenu.css"  />-->
<link rel="stylesheet" href="../styles/clinreason.css" />

<script type="text/javascript" src="../scripts/jquery112/jquery.js"></script>
<script type="text/javascript" src="../scripts/jquery112/jquery-ui.min.js"></script>
<script type="text/javascript" src="../scripts/jquery112/jquery-ui.js"></script>
<script src="../scripts/draw2d/lib/shifty.js"></script>	
<script src="../scripts/draw2d/lib/raphael.js"></script>			
<script src="../scripts/draw2d/lib/jquery.autoresize.js"></script>	
<script src="../scripts/draw2d/lib/jquery-touch_punch.js"></script>	
<script src="../scripts/draw2d/lib/jquery.contextmenu.js"></script>	
<script src="../scripts/draw2d/lib/rgbcolor.js"></script>	
<script src="../scripts/draw2d/lib/canvg.js"></script>	
<script src="../scripts/draw2d/lib/Class.js"></script>	
<script src="../scripts/draw2d/lib/json2.js"></script>	
<script src="../scripts/draw2d/lib/pathfinding-browser.min.js"></script>
<script src="../scripts/draw2d/src/draw2d.js"></script>	
<script src="../scripts/draw2d/src/LabelConnection.js"></script>	
<script src="../scripts/draw2d/src/LabelRectangle.js"></script>	
<script src="../scripts/draw2d/src/LabelLMEditor.js"></script>	

<script src="../scripts/draw2d/lib/jquery.browser.js"></script>
<script src="../scripts/draw2d/lib/jquery.layout.js"></script>
<script src="../scripts/draw2d/src/mydraw2d.js"></script>

<script language="JavaScript">

//var $j = jQuery.noConflict();
var msg2="Please connect the hypotheses with the findings";
var numHyps = 1;
var numFinds = 0;
var numDiagnSteps = 0;
var numMng = 0;

 var my_canvas = null;
 draw2d.Configuration.factory.createConnection=function(sourcePort, targetPort, callback, dropTarget){
	    return new LabelConnection();
 };
 

$(function() {
    $( "#tabs" ).tabs({
    	//active = $( ".selector" ).tabs( "option", "active" ),
        event: "mouseover"
      });
   /* $( "#tabs").tabs({
    	  active: 2
    	});
    $( "#tabs" ).mouseover(function() {
    	  alert(this.active);
    	});*/
    $( document ).tooltip();
    $( ".draggable" ).draggable();	
    //$("#canvascontainer").draggable();
    $( "#list_diagnoses" ).sortable();
    $( "#list_diagnoses" ).disableSelection();
    $( "#list_mngs" ).sortable();
    $( "#list_mngs" ).disableSelection();
    $( "#list_problems" ).sortable();
    $( "#list_problems" ).disableSelection();
    $( "#trashbindiv" ).droppable({
    	/*accept: ".sortable",*/
        drop: function( event, ui ) {
          $( this ) //this.id = id of trashbin
              removeItemFromList(ui.draggable);        
        }
      });

    $( "#confidence_slider" ).slider({
       orientation: "vertical",
    	min: 0,
    	max: 100,
    	step: 1,
    });
	$("#jdialog").dialog({
		autoOpen: false,
		modal: true,
		width: "auto",
		height: "auto"
	});
	
	my_canvas  = new draw2d.Canvas("canvas");
	 /*for testing */
	 createAndAddHyp("Pneumonia",90,5,"cmddx_2");
	/*createAndAddHyp("Acute Bronchitis",170,50);
	 createAndAddFind("Cough", 100, 200);
	 createAndAddDiagnStep("Chest X-Ray", 170, 200);
	 createAndAddMng("Do nothing", 200, 50);*/
	/* testing end */
	  updatePreview();
	  my_canvas.getCommandStack().addEventListener(function(e){
	      if(e.isPostChangeEvent()){
	          updatePreview();
	  } 
	  });
	initAddHyp();
	initAddFind();
	initAddMng();
	initAddDiagnStep();
	/*$("#jdialogCanvas").dialog({
		autoOpen: false,
		modal: false,
		width: "auto",
		height: "auto"
	});	*/
	my_canvas.on("figure:remove", function(emitter, event){
	    //alert("figure removed:");
	 });

	toggleSubmit();
	//$("#canvascontainer").hide();
});

function initAddHyp(){
  $( "#addhyp" ).draggable({ //add a new hypothesis
	  start: function( event, ui ) {
		 $("#addhyp").clone().prependTo($("#hypcontainer")); 
	  } , 
	  stop: function( event, ui ) {	
		  this.remove();	  
		  var canvasX = ui.offset.left- my_canvas.html.offset().left;
 		  var canvasY = ui.offset.top - my_canvas.html.offset().top;
	  	createAndAddHyp("neue hyp", canvasX, canvasY,"cmddx_-1");	  	
	  	updatePreview();
	  }
  });	
}

function initAddFind(){
	$( "#addfind" ).draggable({ //add a new hypothesis
	  start: function( event, ui ) {
			 $("#addfind").clone().prependTo($("#findcontainer")); 
		  } , 
		  stop: function( event, ui ) {	
			  this.remove();	
			  var canvasX = ui.offset.left- my_canvas.html.offset().left;
	 		  var canvasY = ui.offset.top - my_canvas.html.offset().top;

		  	createAndAddFind("new find", canvasX, canvasY, "cmprob_-1");	  	
		  	updatePreview();
		  }
	  });	
}

function initAddMng(){
	 $( "#addmng" ).draggable({ //add a new hypothesis
		  start: function( event, ui ) {
			 $("#addmng").clone().prependTo($("#mngcontainer")); 
		  } , 
		  stop: function( event, ui ) {	
			  this.remove();	
			  var canvasX = ui.offset.left- my_canvas.html.offset().left;
	 		  var canvasY = ui.offset.top - my_canvas.html.offset().top;
		  	  createAndAddMng("new mng", canvasX, canvasY, "cmmng_-1");	  	
		      updatePreview();
		  }
	 });	
}

function initAddDiagnStep(){
	 $( "#adddiagnstep" ).draggable({ //add a new hypothesis
		  start: function( event, ui ) {
			 $("#adddiagnstep").clone().prependTo($("#dscontainer")); 
		  } , 
		  stop: function( event, ui ) {	
			  this.remove();	
			  var canvasX = ui.offset.left- my_canvas.html.offset().left;
	 		  var canvasY = ui.offset.top - my_canvas.html.offset().top;
			  createAndAddDiagnStep("new test", canvasX, canvasY,"cmds_-1");	  	
		  	updatePreview();
		  }
	}); 
}
/*an item has been dragged onto the trash bin, so, we remove it from the list*/
function removeItemFromList(draggable){
	var itemIdToDel = draggable.attr("id"); //e.g. problems_2, ddx_67
	//trigger ajax call here....
	removeItemFromListCallback(draggable);
}
/* back from ajax call, remoce item from list and the concept map*/
function removeItemFromListCallback(draggable){
	
	var id_prefix = draggable.attr("id");
	alert(id_prefix);
	draggable.remove();
	//we also remove the item from the canvas:
	var idInCM = "cm"+id_prefix.substring(3);	
	var rect  = my_canvas.getFigure(idInCM);
	deleteItemFromCM(rect); //removes the ite from the cm		
}

/*
 * a problem is added to the list of the already added problems:
 */
function addProblem(problemId, name){
	//here we have to trigger an ajax call... 
	//var problemId = $("#problems").val();
	if(problemId>-1) addProblemCallBack(problemId, name);
}

function addProblemCallBack(problemId, selProblem){
	//we get the problemId and name and a rating via ajax...
	$("#problems").val("");
	//var selProblem = $("#problems option:selected").text();
	var isCorr = tmpHelperGetCorrect(problemId);
	var y = (numFinds * 30) +10;
	if(isCorr==2) $("#list_problems").append("<li id='selProb="+problemId+"'>"+selProblem+"<i class=\"icon-ok2\"></i></li>");
	else if(isCorr==1) $("#list_problems").append("<li id='selProb="+problemId+"'>"+selProblem+"<i class=\"icon-ok1\"></i></li>");
	else $("#list_problems").append("<li id='selprob_"+problemId+"'>"+selProblem+"</li>");
	
	//alert(problemId);
	createAndAddFind(selProblem,5, y, "cmprob_"+problemId);
	numFinds++;
		
}
/* if the answer was correct, but there is a better choice we offer the learner to change it by clicking on the checkmark*/
function chgProblem(orgId, toChgId){
	var confirmMsg = confirm("The term you have chosen is correct, however, a better choice would have been Dyspnea. Do you want to change your choice?");
	if(confirmMsg){
		$("#selprob_"+orgId).html("Dyspnea<i class=\"icon-ok2\"></i>");
		$("#selprob_"+orgId).attr("id","selprob_"+toChgId);
		//also trigger an ajax call to store the change....
	}
}

/* this is no longer needed with ajax */
function tmpHelperGetCorrect(problemId){
	//alert(problemId);
	var exp_problems_ids = [2,5]; //this comes then from ajax, rating can be 0 (wrong), 1(partly correct), 2 (correct)
	for(i=0; i<exp_problems_ids.length; i++){
		if(problemId==exp_problems_ids[i]) return 2;
	}
	return 0;
}

/*
 * a diagnosis is added to the list of the already added diagnoses:
 */
function addDiagnosis(diagnId, selDiagnosis){
	//here we have to trigger an ajax call... 
	//var diagnId = $("#ddx").val();
	if(diagnId>-1){
		addDiagnosisCallBack(diagnId, selDiagnosis);	
	}
}

function addDiagnosisCallBack(diagnId, selDiagnosis){
	$("#ddx").val("");
	//var selDiagnosis = $("#ddx option:selected").text();
	var liItem = "<li id='selddx_"+diagnId+"'>";
	//$("#list_diagnoses").append("<li id='selddx_"+diagnId+"'>");
	liItem+="<a href=\"javascript:toggleMnM('"+diagnId+"');\" title=\"Is this a Must-Not-Miss diagnosis? E.g. because it is lethal?\"><i id=\"mnmicon_"+diagnId+"\" class=\"icon-attention0\"></i></a>";
	liItem+=" "+selDiagnosis+" ";
	liItem +="<a href=\"javascript:changeTier('"+diagnId+"');\" id=\"tiera_"+diagnId+"\" title=\"How likely is this diagnosis?\"><i id=\"tiericon_"+diagnId+"\" class=\"icon-circle-tier0\"></i></a>";
	liItem+="</li>";
	$("#list_diagnoses").append(liItem);
	//$("#ddx").val("-1");
	//var x = numHyps*50;
	var y = (numHyps * 30) +5;
	createAndAddHyp(selDiagnosis,90, y, "cmddx_"+diagnId);
	numHyps++;
}

/*
 * a test is added to the list of the already added tests:
 */
function addTest(testId, testname){
	//here we have to trigger an ajax call... 
	//var testId = $("#tests").val();
	if(testId>-1) addTestCallBack(testId, testname);
}

function addTestCallBack(testId,selTest){
	//we get the problemId and name via ajax...
	//var selTest = $("#tests option:selected").text();
	$("#tests").val("");
	var y = (numDiagnSteps * 30) +10;
	$("#list_tests").append("<li id='selds_"+testId+"'>"+selTest+"</li>");
	//$("#tests").val("-1");
	createAndAddDiagnStep(selTest,190, y, "cmds_"+testId);
	numDiagnSteps++;
}

/*
 * a management item is added to the list of the already added items:
 */
function addManagement(mngId, selMng){
	//here we have to trigger an ajax call... 
	//var mngId = $("#mng").val();
	if(mngId>-1) addManagementCallBack(mngId, selMng);
}

function addManagementCallBack(mngId, selMng){
	//we get the problemId and name via ajax...
	//var selMng = $("#mng option:selected").text();
	$("#mng").val("");
	$("#list_mngs").append("<li id='selmng_"+mngId+"'>"+selMng+"</li>");	
	var y = (numMng * 30) +10;
	createAndAddMng(selMng,250, y, "cmmng_"+mngId);
	numMng++;
}

/* we submit the DDX (or only final diagnoses?) and ask for certainity*/
function doSubmitDDX(){
	//we check whether there is a final diagnosis, if so we submit, else we display a hint
	//if()
	//$("#jdialog").dialog( "option", "position", ['center',50] );
	$("#jdialog").dialog( "option", "width", ['200'] );
	$("#jdialog").dialog( "option", "height", ['200'] );
	$("#jdialog").dialog( "option", "title", "Submit final diagnoses" );
	$("#jdialog").dialog( "option", "buttons", [ ] );
	$("#jdialog" ).dialog( "open" );
}

/* user has confirmed that he wants to submit disgnoses/-is*/
function submitDDXConfirmed(){
	
	submitDDXConfirmedCallBack();
}

function submitDDXConfirmedCallBack(){
	//we retrieve scoring of diagnoses and display it here, also whether an error has occured. 
	$("div[id=jdialog]").html("Correct! Final diagnosis of expert is Bronchopneumonia. Differentials include acute bronchits.");
	$("#is_icon").removeClass("icon-list-off");
	$("#is_icon").addClass("icon-list-on");
	
}

/* We open a jdialog for the concept map*/
function openCanvas(){
	$("#canvascontainer").show();
}
var tiermsg=["I do not now","Clinically high likelyhood","Clinically moderate likelyhood","Clinically low likelyhood","My final diagnosis"];

/* we change the tier-color of the corresponding diagnosis*/
function changeTier(id){
	var id2 = "tiericon_"+id;
	var actClass = $("#"+id2).attr("class");
	var num = Number(actClass.charAt( actClass.length-1 )) +1;
	if(num>=5) num=0;
	$("#"+id2).removeClass(actClass);
	$("#"+id2).addClass("icon-circle-tier"+num);
	$("#tiera_"+id).prop("title",tiermsg[num]);
	toggleSubmit();	
}

/* we activate the upload button to submit DDX*/ 
function toggleSubmit(){
	var hasFinalDiagnosis = hasAFinalDiagnosis();
	if(hasFinalDiagnosis){
		//if($("#uploadddx").attr("class")=="icon-upload-on") return;
		$("#uploadddx").removeClass("icon-upload-off");
		$("#uploadddx").addClass("icon-upload-on");

	}
	else{
		//if($("#uploadddx").attr("class")=="icon-upload-off") return;
		$("#uploadddx").removeClass("icon-upload-on");
		$("#uploadddx").addClass("icon-upload-off");
		$("#is_icon").removeClass("icon-list-on");
		$("#is_icon").addClass("icon-list-off");
	}
}


function hasAFinalDiagnosis(){
	//tiericon_1
	var numFinDiagn = $(".icon-circle-tier4").length;
	if(numFinDiagn>0) return true;
	return false;
}

/* a diagnosis is changed to must not missed -red icon or toggled back*/
function toggleMnM(id){
	var id = "mnmicon_"+id;
	var actClass = $("#"+id).attr("class");
	$("#"+id).removeClass(actClass);
	if(actClass=="icon-attention0") $("#"+id).addClass("icon-attention1");
	else  $("#"+id).addClass("icon-attention0");
}
var active = $( "#tabs" ).tabs( "option", "active" ); //we have to determine the active tab, to be able to adapt the nav icons!
  
  $(function() {
	    function log( message ) {
	      $( "<div>" ).text( message ).prependTo( "#log" );
	      $( "#log" ).scrollTop( 0 );
	    }
	 
	    $.ajax({
	        url: "jsonp.json",
	        dataType: "json",
	        success: function( data ) {
	          $( "#problems" ).autocomplete({
	            source: data,
	            minLength: 3,
	            select: function( event, ui ) {
	            	addProblem(ui.item.value, ui.item.label);
	            },
	  	      close: function(ui) {
	  	        $("#problems").val("");
	  	      }
	          });
	        }
	      });
	    
	    $.ajax({
	        url: "jsonp.json",
	        dataType: "json",
	        success: function( data ) {
	          $( "#ddx" ).autocomplete({
	            source: data,
	            minLength: 3,
	            select: function( event, ui ) {
	            	addDiagnosis(ui.item.value, ui.item.label);
	            },
	  	      close: function(ui) {
	  	        $("#ddx").val("");
	  	      }
	          });
	        }
	      });
	    $.ajax({
	        url: "jsonp.json",
	        dataType: "json",
	        success: function( data ) {
	          $( "#tests" ).autocomplete({
	            source: data,
	            minLength: 3,
	            select: function( event, ui ) {
	            	addTest(ui.item.value, ui.item.label);
	            },
	  	      close: function(ui) {
	  	        $("#tests").val("");
	  	      }
	          });
	        }
	      });
	    $.ajax({
	        url: "jsonp.json",
	        dataType: "json",
	        success: function( data ) {
	          $( "#mng" ).autocomplete({
	            source: data,
	            minLength: 3,
	            select: function( event, ui ) {
	            	addManagement(ui.item.value, ui.item.label);
	            },
	  	      close: function(ui) {
	  	        $("#mng").val("");
	  	      }
	          });
	        }
	      });
	  });

function doDisplayIS(){
	if($("#is_icon").attr("class")=="icon-list-on")
		alert("Display of the Illness Script(s) for the (correct) final diagnoses");
	else alert("You can access the Illness Script only after submitting your final diagnoses.");
}
</script>
</head>
<body style="font-family:arial;">
<!--   <div id="canvascontainer" class="canvascontainer">
	<div id="canvas" class="canvas"> </div>
	<span id="hypcontainer"></span><div id="addhyp" class=" newElem newHyp">Hypothesis</div>
    <span id="findcontainer"></span><div id="addfind" class=" newElem newFind">Problem</div>
   	<span id="dscontainer"></span> <div id="adddiagnstep" class=" newElem newDiagnStep">Diagn. Step</div>
    <span id="mngcontainer"></span> <div id="addmng" class=" newElem  newMng">Managment</div> 
 </div> -->
 <div id="case_story" style="float:left;width:60%;border:1px;border-color:#cccccc">
Virtual Patient story here (e.g. in Casus)
<!--  "Good morning Dr. Epstein" says the practice administrator as she puts your cup of tea down in front of you. "I think you have a busy surgery this morning".
Your eyes are drawn to the window behind and the glorious view over the rooftops of Buckden and Wharfdale to the hills behind. Maybe there would be time later.....
"Oh Dr Epstein, I think you'd better see the young gentleman that's just come in - he doesn't look so good. I've popped him in the treatment room."
<br/><br/>

Waiting for you on the couch is Henry Rodin, who has been brought in by his friends by taxi. He is visibly ill and distressed.

He can barely stand or speak, is flushed, hot, short of breath, and coughing frequently. He complains of severe pain in the right side of the chest when he breathes. The practise nurse has measured his temperature, at 39.6Â°C. 
<br/><br/>

Henry is having some difficulty answering your questions now. You note that he is breathing a little fast too.
Nevertheless, you are able to find out that is no history of significant serious illness during adult life.
Henry's works in an insurance brokers, but works out regularly, and he is fit and active. For the previous 4 years their group had spent a fortnight or so each autumn hiking.
Henry a non-smoker is married, with no children, who drinks alcohol socially. There is no history of allergy, medications, or chest problems. No significant family history. Just before undertaking this hike there had been a mild episode of a cold or flu-like illness, but not enough to abandon the hike.
His respiratory rate 45/min, Pulse 116 /min, blood pressure 109/55, temperature 39.6 C, Saturation 79% in air.
On examination his chest expansion seems somewhat limited on the right, and there is an area of altered breath sounds, with bronchial breathing and coarse rales over the upper right quadrant. This area is dull to percussion. A pleural friction rub is present.
What would you like to do now?-->

</div>

	<div id="tabs" class="cr-tabs">
	  <ul>
	    <li><a href="#tabs-1">Patient</a></li>
	    <li><a href="#tabs-2">Problems</a></li>
	     <li><a href="#tabs-4">Summary</a></li>
	    
	    <li><a href="#tabs-3">DDX</a></li>
	    <li><a href="#tabs-5">Diagn. Steps</a></li>
	    <li><a href="#tabs-6">Therapy</a></li>
	    <li><a href="#tabs-7">CM</a></li>
	  </ul>
		  <div id="tabs-1">
		  <div id="patimg" style="position:relative;right:0px; top:0px; float:right;"><img src="patient.png" width="150px" /></div>
		  	<div id="descr">
		  		Name: Henry Rodin<br/>
				Age: 30, Gender: M<br/>
				Course of Time: <select class="f_select" id="courseTime"><option value="-1">-</option><option value="1">acute</option><option value="2">chronic</option></select>
			</div>
		  </div>
		  <div id="tabs-2">	<div class="ddx_left"><!--  <select id="problems" onchange="addProblem();" class="custom-combobox f_select">-->
 <!--  <span id="problem_input">	<input onclick="openProblemsList();" class="f_text"></input></span>-->
<input class="f_text" id="problems"></input>
<!--  		  	<select class="f_select" onchange="addProblem();" id="problems"><option value="-1">-</option><option value="1">Cough</option><option value="2">Fever</option><option value="3">Cyanosis</option><option value="4">Dyspnea</option><option value="5">Chest pain</option></select>-->
			<br/><ol id="list_problems" class="sortable"><li id="selprob_6">Shortness of Breath<a href="javascript:chgProblem('6','4');"><i class="icon-ok1"></i></a></li></ol>
			</div>
		  </div>
		  <div id="tabs-4">	<textarea class="f_textarea" name="summSt" cols="50" rows="10"></textarea>
		  </div>
		  <div id="tabs-3">	
		  	<div class="ddx_left"><input class="f_text" id="ddx"></input>
				<!-- <select class="f_select" onchange="addDiagnosis();" id="ddx"><option value="-1">-</option><option value="1">Pneumonia</option><option value="2">Acute Bronchitis</option><option value="4">Flu</option><option value="3">COPD</option></select>--><br/>
				<ol id="list_diagnoses" class="sortable">
					<li id="selddx_2"><a href="javascript:toggleMnM('1');" title="Is this a Must-Not-Miss diagnosis? E.g. because it is lethal?"><i id="mnmicon_1" class="icon-attention0"></i></a>Pneumonia<a href="javascript:changeTier('1');" id="tiera_1" title="How likely is this diagnosis?"><i id="tiericon_1" class="icon-circle-tier0"></i></a></li>
				</ol>
			</div>
			<div id="confidence_slider" class="conf_slider" title="Level of confidence"></div>
	
		  </div>
		  <div id="tabs-5"><div class="ddx_left" style="width:300px;"><input class="f_text" id="tests"></input>
		  		<!-- <select id="tests"  onchange="addTest();" class="f_select"><option>-</option><option value="1">Chest X-Ray</option></select>-->
				<br/><ul id="list_tests" class="sortable"><li id="selds_1">Chest X-ray <select class="f_select"><option value="-1">scanning</option><option>r/c Pneumonia</option></select></li></ul>
		  </div></div>
		  <div id="tabs-6"><div class="ddx_left"><input class="f_text" id="mng"></input>
		  		<!-- <select id="mng" class="f_select" onchange="addManagement();"><option value="-1">-</option><option value="0">do nothing</option><option value="1">antibiotics</option></select>-->
		   		<br/><ol id="list_mngs" class="sortable"></ol>	   	
		  </div> </div>
		   <div id="tabs-7">
				<div id="canvas" class="canvas"> </div>
				 <div class="newElemContainer">
				 	<span id="findcontainer"></span><div id="addfind" class=" newElem newFind">Problem</div><br/>
					<span id="hypcontainer"></span><div id="addhyp" class=" newElem newHyp">Diagnosis</div><br/>
			   		<span id="dscontainer"></span> <div id="adddiagnstep" class=" newElem newDiagnStep">Diagn. Step</div><br/>
			    	<span id="mngcontainer"></span> <div id="addmng" class=" newElem  newMng">Managment</div> 
			    </div>
		   </div>
		    <div id="trashbindiv" class="trashbindiv"><i class="icon-trash-1"></i></div>
			  	<div class="navfooter"><a href="" title="take notes"><i class="icon-edit"></i></a>
			  	<a href="javascript:getProblemFedback();" title="See an experts problems"><i class="icon-user-md"></i></a> 
				<a href="javascript:getProblemPeerFedback();" title="See problems listed by your peers"><i class="icon-users"></i></a>
				<a href="javascript:doSubmitDDX();" title="Submit your final diagnoses and differentials"><i id="uploadddx" class="icon-upload-off"></i></a>
				<a href="javascript:doDisplayIS();" title="open illness script"><i id="is_icon" class="icon-list-alt"></i></a></div>
		  	<!--  </div>-->
		  	<!--  <div class="cm-preview"><a href="javascript:openCanvas();" title="click to open concept map"><img id="preview_img" style="border-radius:5px;overflow:auto; width:50px; height:50px;"/> </a></div> -->
		 <!--   </div>-->
	</div>   
	
	<!-- 
	open questions/issues: 
		- do we want to keep lists and CP in sync all the time or leave it up to the user and ask if deleting in list or cm?
		- tabs or accordion display?
		- how to implement the notes? 
		- CM preview needed? 
		- display of rect/label not correct
		- connection labels just on contextmenu?
	 --> 

<div id="jdialog">Are you sure you want to submit Pneumonia as your final diagnosis without any further work-up?<br/>
<a href="javascript:submitDDXConfirmed();">Yes</a><br/></div>
	
</body>
</html>