<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="beans"> 

	<class name="PatientIllnessScript" table="crt.patient_illnessscript">
		<cache usage="nonstrict-read-write" />
		<comment>Patient Illness Script</comment>	
	
		<id name="id" type="long" column="id">
			<generator class="sequence">
				<param name ="sequence">CRT.CR_SEQ</param>
			</generator>
		</id>
		<property name="userId" column="user_id" type="long" />			
		<property name="sessionId" column="session_id" type="long" />
		<property name="courseOfTime" column="courseoftime" type="int"/>	
		<property name="parentId" column="parent_id" type="long"/>	
		<property name="submittedStage" column="ddx_submitted" type="int"/>
		<property name="type" column="type" type="int"/>
		<property name="locale" column="locale" update="false" type="locale"/>	
		<property name="currentStage" column="stage" type="int"/>	
		<property name="confidence" column="confidence" type="int"/>	
		<!--  <property name="creationDate" column="creation_date" update="false" type="timestamp"/>-->
	    <!-- <many-to-one name="summSt" column="summst_id" not-null="false" update="false" insert="false" lazy="false" />-->
	    <property name="summStId" column="summst_id" type="long"/>
	    <property name="peerSync" column="peer_sync" type="boolean"/>
	    
 		<!--  <many-to-one name="courseIcon" column="course_icon" not-null="false" update="false" insert="false"/>
		<property name="icon_id" column="course_icon" type="long"/>-->
 		
		<list name="problems" table="crt.relation_problem" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="idx" base="0"/>
    		<one-to-many class="beans.relation.RelationProblem"/>   		
		</list>	
		<list name="diagnoses" table="crt.relation_diagnosis" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="idx" base="0"/>
    		<one-to-many class="beans.relation.RelationDiagnosis"/>   		
		</list>	
		<list name="tests" table="crt.relation_test" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="idx" base="0"/>
    		<one-to-many class="beans.relation.RelationTest"/>   		
		</list>	
		<list name="epis" table="crt.relation_epi" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="idx" base="0"/>
    		<one-to-many class="beans.relation.RelationEpi"/>   		
		</list>	
		<list name="mngs" table="crt.relation_management" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="idx" base="0"/>
    		<one-to-many class="beans.relation.RelationManagement"/>   		
		</list>	
		<list name="errors" table="crt.error" cascade="all" lazy="false"> <!-- table="crt.relation_problem"-->
    		<key column="dest_id"/> <!-- dest_id = patientIllnessScript id -->
    		<list-index column="type" base="1"/>
    		<one-to-many class="beans.error.MyError"/>   		
		</list>			
		<map name="conns" table="crt.connection" lazy="false" cascade="all" order-by="id" >
	   		<key column="illscript_id" />
	   		<map-key column="id" type="long"/>	   		
	    	<one-to-many class="beans.Connection" />
	    </map>		
</class>
</hibernate-mapping>